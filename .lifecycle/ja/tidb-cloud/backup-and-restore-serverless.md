---
title: TiDB サーバーレスデータのバックアップとリストア
summary: TiDB サーバーレスクラスターのデータをバックアップおよびリストアする方法について学びます。
aliases: ['/tidbcloud/restore-deleted-tidb-cluster']
---

# TiDB サーバーレスデータのバックアップとリストア

本書では、TiDB Cloud 上で TiDB サーバーレスクラスターのデータをバックアップおよびリストアする方法について説明します。

> **ヒント:**
>
> TiDB デディケーションクラスターのデータをバックアップおよびリストアする方法については、[TiDB デディケーションデータのバックアップとリストア](/tidb-cloud/backup-and-restore.md)を参照してください。

## 制限事項

- TiDB サーバーレスクラスターは、バックアップからのインプレースリストアのみをサポートしています。リストアを実行すると、`mysql` スキーマ内のテーブルにも影響が及びます。したがって、ユーザー資格情報や権限、システム変数に加えられた変更はバックアップ時の状態にロールバックされます。
- マニュアルバックアップはまだサポートされていません。
- リストアプロセス中はクラスターが利用できなくなり、既存の接続が終了します。リストアが完了すると新しい接続を確立できます。
- TiFlash レプリカが有効な場合、TiFlash でデータを再構築する必要があるため、リストア後はしばらくレプリカが利用できなくなります。

## バックアップ

自動バックアップはバックアップ設定に従って TiDB サーバーレスクラスターにスケジュールされ、極端な災害に備えてデータ損失を軽減できます。

### 自動バックアップ

自動バックアップにより、設定したバックアップ時間に従って TiDB サーバーレスクラスターデータを毎日バックアップできます。バックアップ時間を設定するには、次の手順を実行します。

1. TiDB サーバーレスクラスターの**バックアップ**ページに移動します。

2. **バックアップ設定**をクリックします。これにより**バックアップ設定**ウィンドウが開き、要件に応じて自動バックアップ設定を構成できます。

    - **バックアップ時間**で、クラスターの毎日のバックアップ開始時間をスケジュールします。

        希望のバックアップ時間を指定しない場合、TiDB Cloud はクラスターが位置する地域のタイムゾーンで 2:00 AM というデフォルトのバックアップ時間を割り当てます。

    - **バックアップの保持期間**で、最小のバックアップデータ保持期間を構成します。

        バックアップ保持期間は 7 から 90 日の範囲内で設定する必要があります。

3. **確認**をクリックします。

### バックアップファイルの削除

既存のバックアップファイルを削除するには、次の手順を実行します。

1. クラスターの**バックアップ**タブに移動します。

2. 削除したいバックアップファイルの**削除**をクリックします。

## リストア

TiDB サーバーレスはインプレースリストアのみをサポートしています。バックアップから TiDB サーバーレスクラスターをリストアするには、次の手順に従います。

1. クラスターの**バックアップ**ページに移動します。

2. **リストア**をクリックします。設定ウィンドウが表示されます。

3. **リストアモード**で、特定のバックアップまたは過去の任意の時点からリストアするかを選択できます。

    <SimpleTab>
    <div label="基本的なスナップショットのリストア">

    選択したバックアップスナップショットからリストアするには、次の手順を実行します。

    1. **基本的なスナップショットのリストア**をクリックします。
    2. リストアしたいバックアップスナップショットを選択します。

    </div>
    <div label="時間指定のリストア">

    この機能を使用すると、過去 90 日間で任意の時点にクラスターをリストアできます。

    > **注意:**
    >
    > **時間指定のリストア**機能は現在ベータ版です。

    特定の時点からリストアするには、次の手順を実行します。

    1. **時間指定のリストア**をクリックします。
    2. リストアしたい日時を選択します。

    </div>
    </SimpleTab>

4. **リストア**をクリックしてリストアプロセスを開始します。

   リストアプロセスを開始すると、クラスターの状態が**リストア中**に変わります。リストアプロセス中はクラスターが利用できなくなり、既存の接続が終了します。リストアプロセスが正常に完了すると、通常通りクラスターにアクセスできるようになります。