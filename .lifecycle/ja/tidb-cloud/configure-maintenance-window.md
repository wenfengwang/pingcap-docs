---
title: メンテナンスウィンドウの設定
summary: クラスタのメンテナンスウィンドウを設定する方法についての説明です。

# メンテナンスウィンドウの設定

メンテナンスウィンドウはTiDB Cloudサービスの信頼性、セキュリティ、パフォーマンスを確保するために自動的に実行される、OSの更新、セキュリティパッチ、およびインフラのアップグレードなどの計画されたメンテナンスタスクが行われる指定された時間枠です。

メンテナンスウィンドウ中に、メンテナンスはTiDB専用クラスターごとに実行されるため、全体への影響は最小限に抑えられます。一時的な接続の中断やQPSの変動は発生する場合がありますが、クラスターは利用可能であり、既存のデータインポート、バックアップ、リストア、マイグレーションおよびレプリケーションタスクは通常通り実行できます。

メンテナンスウィンドウを設定することで、メンテナンスの影響を最小限に抑えるためのスケジュール管理を簡単に行うことができます。たとえば、メンテナンスウィンドウの開始時刻をアプリケーションのピーク時間帯を避けるように設定することができます。

> **注意:**
>
> メンテナンスウィンドウ機能は[TiDB専用クラスター](/tidb-cloud/select-cluster-tier.md#tidb-dedicated)のみで利用可能です。

## メンテナンスウィンドウ中の許可および不許可の操作

メンテナンスウィンドウ中には、一部の操作が許可されていますが、一部は許可されていません。

- 許可されている操作:

    - SQL操作
    - クラスターの作成
    - クラスターの削除
    - バックアップタスクの作成
    - クラスターリストア
    - クラスターページへのアクセス

- 許可されていない操作:

    - クラスターの変更、一時停止、再開
    - TiDB Cloudコンソールでのセキュリティ設定の変更
    - プライベートリンクの作成またはVPCピアリングの構成
    - インポートタスク、マイグレーションジョブ、またはチェンジフィードの作成
    - マイグレーションジョブまたはチェンジフィードの仕様をスケール変更

## メンテナンスウィンドウの通知を受け取る

潜在的な障害を回避するためには、メンテナンススケジュールを把握し、適切に操作を計画することが重要です。

各メンテナンスウィンドウについて、TiDB Cloudは以下の時点で、全プロジェクトメンバーに4通の電子メール通知を送信します。

- メンテナンスウィンドウ開始の2週間前（緊急メンテナンスタスクを除く）
- メンテナンスウィンドウ開始の72時間前
- メンテナンスウィンドウが開始された時刻
- メンテナンスウィンドウが完了した時刻

## メンテナンスウィンドウの表示と設定

定期的なメンテナンスによって、TiDB Cloudがセキュリティの脅威やパフォーマンスの問題、信頼性から保護されるため、メンテナンスウィンドウはデフォルトで有効になっており、無効にすることはできません。

メンテナンスウィンドウが計画された場合、ウィンドウのデフォルト開始時刻は、対象週の水曜日の03:00（TiDB Cloud組織のタイムゾーンに基づく）です。

開始時刻を好みの時刻に変更したり、期限までメンテナンスタスクを延期することができます。

1. [TiDB Cloudコンソール](https://tidbcloud.com)にログインします。
2. 左下隅の<MDSvgIcon name="icon-left-projects" />をクリックし、複数のプロジェクトを持っている場合は対象プロジェクトに切り替え、**プロジェクト設定**をクリックします。
3. プロジェクトの**プロジェクト設定**ページで、左側のナビゲーションペインの**メンテナンス**をクリックします。

     - メンテナンスタスクが表示されている場合は、説明、スケジュールされた開始時刻、および期限を確認します。メンテナンスタスクは指定された時刻に開始されます。

     - メンテナンスデータがない場合は、最近スケジュールされたメンテナンスタスクがないことを意味します。

4. (任意) メンテナンスウィンドウの開始時刻を変更するには、<svg width="15" height="15" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="mantine-1o1jehl"><path d="M11 3.99998H6.8C5.11984 3.99998 4.27976 3.99998 3.63803 4.32696C3.07354 4.61458 2.6146 5.07353 2.32698 5.63801C2 6.27975 2 7.11983 2 8.79998V17.2C2 18.8801 2 19.7202 2.32698 20.362C2.6146 20.9264 3.07354 21.3854 3.63803 21.673C4.27976 22 5.11984 22 6.8 22H15.2C16.8802 22 17.7202 22 18.362 21.673C18.9265 21.3854 19.3854 20.9264 19.673 20.362C20 19.7202 20 18.8801 20 17.2V13M7.99997 16H9.67452C10.1637 16 10.4083 16 10.6385 15.9447C10.8425 15.8957 11.0376 15.8149 11.2166 15.7053C11.4184 15.5816 11.5914 15.4086 11.9373 15.0627L21.5 5.49998C22.3284 4.67156 22.3284 3.32841 21.5 2.49998C20.6716 1.67156 19.3284 1.67155 18.5 2.49998L8.93723 12.0627C8.59133 12.4086 8.41838 12.5816 8.29469 12.7834C8.18504 12.9624 8.10423 13.1574 8.05523 13.3615C7.99997 13.5917 7.99997 13.8363 7.99997 14.3255V16Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>をクリックします。その週にメンテナンスウィンドウが計画されている場合は、指定された開始時刻にメンテナンスが実行されます。

5. 予定されたメンテナンスタスクの開始時刻を延期するには、**アクション**列の**延期**をクリックし、期限までの次の実行可能なメンテナンスウィンドウに変更します。

    メンテナンスタスクを期限を過ぎて延期する必要がある場合は、[TiDB Cloudサポート](/tidb-cloud/tidb-cloud-support.md#tidb-cloud-support)に連絡してサポートを受けてください。

## よくある質問

- メンテナンスタスクとは何ですか？

    メンテナンスタスクには、通常、OSの更新、セキュリティパッチ、およびインフラのアップグレードなどが含まれます。

- メンテナンスウィンドウを無効にできますか？

    できません。メンテナンスウィンドウはデフォルトで有効になっており、無効にすることはできません。ただし、メンテナンスウィンドウの開始時刻を変更したり、メンテナンスタスクを期限まで2〜4週間延期することができます。詳細については、[メンテナンスウィンドウの表示と設定](#view-and-configure-maintenance-windows)を参照してください。

- メンテナンスウィンドウはどのくらいの期間続きますか？

    プロジェクトごとに、メンテナンスは対象のTiDBクラスターに対して一つずつ実行されます。メンテナンスの期間は、クラスターの数、クラスターデータのサイズ、実行するメンテナンスタスクによって異なります。

- メンテナンスタスクはどのようなステータスのクラスターで実行されますか？

    いいえ。TiDB Cloudは、クラスターのステータスを確認し、メンテナンスタスクを実行する前に次のようにします。

    - クラスターが**作成中**または**一時停止中**の状態である場合、メンテナンスタスクは必要ありません。
    - クラスターが自動または手動のバックアップを実行している場合、メンテナンスは遅延され、現在のバックアップが正常に完了するまでトリガーされません。データ量の多いクラスターの場合、バックアップ処理には12時間などの長い時間がかかる場合があります。クラスターへの影響を最小限に抑えるために、バックアップの開始時刻とメンテナンスウィンドウを慎重に設定することをお勧めします。
    - クラスターが他のどの状態でも、メンテナンスタスクは予定通りに開始されます。