---
title: TiDB モニタリングFAQ
summary: TiDBモニタリングに関連するFAQについて学びます。

# TiDBモニタリングFAQ

このドキュメントはTiDBモニタリングに関連するFAQをまとめています。

- Prometheusモニタリングフレームワークの詳細については、[モニタリングフレームワークの概要](/tidb-monitoring-framework.md)を参照してください。
- モニタリングの主要なメトリクスの詳細については、[主要メトリクス](/grafana-overview-dashboard.md)を参照してください。

## 主要メトリクスを監視するより良い方法はありますか？

TiDBのモニタリングシステムはPrometheusとGrafanaで構成されています。Grafanaのダッシュボードから、TiDBのさまざまな実行メトリクスを監視できます。これには、システムリソースの監視メトリクス、クライアント接続とSQL操作の監視メトリクス、内部通信とリージョンのスケジューリングの監視メトリクスが含まれます。これらのメトリクスにより、データベース管理者はシステムの実行状態、実行ボトルネックなどをよりよく理解できます。これらのメトリクスの監視の実践では、各TiDBコンポーネントの主要メトリクスをリストアップしています。一般的には、これらの共通のメトリクスに注意を払うだけで十分です。詳細については、[公式ドキュメント](/grafana-overview-dashboard.md)を参照してください。

## Prometheusモニタリングデータはデフォルトで15日ごとに削除されます。2か月に設定することはできますか、またはモニタリングデータを手動で削除することはできますか？

はい。Prometheusが起動されるマシンで起動スクリプトを見つけ、起動パラメータを編集してPrometheusを再起動してください。

```config
--storage.tsdb.retention="60d"
```

## リージョンヘルスモニター

TiDB 2.0では、リージョンの健康状態はPDメトリックモニタリングページで監視されます。`リージョンヘルス`モニタリング項目では、すべてのリージョンレプリカの状態の統計が表示されます。`miss`はレプリカ不足を意味し、`extra`は余分なレプリカが存在することを意味します。さらに、`リージョンヘルス`は`label`によって分離レベルも表示します。`level-1`はリージョンレプリカが物理的に最初の`label`レベルで分離されていることを意味します。`location label`が設定されていない場合は、すべてのリージョンが`level-0`になります。

## `selectsimplefull`とは、ステートメント数モニターでの意味は何ですか？

これは完全なテーブルスキャンを意味しますが、テーブルは小規模なシステムテーブルであるかもしれません。

## 監視での`QPS`と`Statement OPS`の違いは何ですか？

`QPS`統計はすべてのSQLステートメントに関するもので、`use database`、`load data`、`begin`、`commit`、`set`、`show`、`insert`、`select`を含みます。

`Statement OPS`の統計は、アプリケーションに関連するSQLステートメントのみに関するもので、`select`、`update`、`insert`を含みます。したがって、`Statement OPS`の統計はアプリケーションにより適しています。
