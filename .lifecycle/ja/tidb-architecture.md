---
title: TiDBアーキテクチャ
summary: TiDBプラットフォームの主要なアーキテクチャコンポーネント
aliases: ['/docs/dev/architecture/', '/tidb/dev/architecture']
---

# TiDBアーキテクチャ

従来の単独のデータベースと比較して、TiDBには以下の利点があります：

* 柔軟で弾力性のある分散アーキテクチャを持っています。
* MySQL 5.7プロトコル、MySQLの一般的な機能、および構文と完全に互換性があります。多くの場合、TiDBへのアプリケーションの移行にはコードを一行も変更する必要がありません。
* レプリカの少数が失敗した場合に自動フェイルオーバーをサポートしており、アプリケーションには透過的です。
* 銀行送金などの強い一貫性が必要なシナリオに適したACIDトランザクションをサポートしています。

<CustomContent platform="tidb">

* [データ移行ツール](/migration-overview.md)の豊富なシリーズが提供され、データの移行、レプリケーション、またはバックアップが可能です。

</CustomContent>

分散データベースとして、TiDBは複数のコンポーネントから構成されるように設計されています。これらのコンポーネントは互いに通信し、完全なTiDBシステムを形成します。アーキテクチャは次のとおりです：

![TiDBアーキテクチャ](/media/tidb-architecture-v6.png)

## TiDBサーバー

[TiDBサーバー](/tidb-computing.md)は、外部にMySQLプロトコルの接続エンドポイントを公開するステートレスSQLレイヤーです。TiDBサーバーはSQLリクエストを受信し、SQLの解析と最適化を行い、最終的に分散実行プランを生成します。水平スケーラブルであり、Linux Virtual Server (LVS)、HAProxy、またはF5などの負荷分散コンポーネントを介して外部に統一されたインターフェースを提供します。データを格納せず、計算とSQL解析のみを行い、実際のデータ読み取りリクエストをTiKVノード（またはTiFlashノード）に伝達します。

## プレイスメントドライバー（PD）サーバー

[PDサーバー](/tidb-scheduling.md)は、クラスタ全体のメタデータ管理コンポーネントです。各TiKVノードの実時データ分布のメタデータとTiDBクラスタ全体のトポロジ構造を保存し、TiDBダッシュボード管理UIを提供し、分散トランザクションに対してトランザクションIDを割り当てます。PDサーバーはTiDBクラスタ全体のメタデータを保存するだけでなく、リアルタイムでTiKVノードから報告されたデータ分布状態に応じて特定のTiKVノードにデータスケジューリングコマンドを送信します。また、PDサーバーは少なくとも3つのノードで構成されており、高い可用性を持っています。奇数のPDノードを展開することが推奨されています。

## ストレージサーバー

### TiKVサーバー

[TiKVサーバー](/tidb-storage.md)はデータの格納を担当します。TiKVは分散トランザクショナルキー値ストレージエンジンです。

<CustomContent platform="tidb">

[リージョン](/glossary.md#regionpeerraft-group)はデータを格納する基本単位です。それぞれのリージョンは特定のKey Range（開始キーから終了キーまでの左閉区間および右開区間）のデータを格納します。

</CustomContent>

<CustomContent platform="tidb-cloud">

[リージョン](/tidb-cloud/tidb-cloud-glossary.md#region)はデータを格納する基本単位です。それぞれのリージョンは特定のKey Range（開始キーから終了キーまでの左閉区間および右開区間）のデータを格納します。

</CustomContent>

各TiKVノードには複数のリージョンが存在します。TiKV APIは、キー値ペアレベルでの分散トランザクションをネイティブサポートし、デフォルトでスナップショット分離レベルの分離をサポートします。これがTiDBがSQLレベルで分散トランザクションをサポートする方法の中核です。SQLステートメントを処理した後、TiDBサーバーはSQL実行プランを実際のTiKV APIへの呼び出しに変換します。したがって、データはTiKVに格納されます。TiKVのすべてのデータは複数のレプリカで自動的に維持されます（デフォルトでは3つのレプリカ）、そのためTiKVにはネイティブの高可用性があり、自動フェイルオーバーをサポートしています。

### TiFlashサーバー

[TiFlashサーバー](/tiflash/tiflash-overview.md)は特殊なタイプのストレージサーバーです。通常のTiKVノードとは異なり、TiFlashは列単位でデータを格納し、主に解析処理の高速化を目的としています。