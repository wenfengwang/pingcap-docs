---
title: tiupミラーパブリッシュ
---

# tiupミラーパブリッシュ

`tiup mirror publish`コマンドは新しいコンポーネントまたは既存のコンポーネントの新しいバージョンを公開するために使用されます。ターゲットのコンポーネントにアクセス権を持つコンポーネント所有者のみがそれを公開できます。新しいコンポーネント所有者を追加するには、[`grant`コマンド](/tiup/tiup-command-mirror-grant.md)の使用方法を参照してください。

## 構文

```shell
tiupミラーパブリッシュ <comp-name> <version> <tarball> <entry> [flags]
```

各パラメータの意味は次のとおりです。

- `<comp-name>`: `tidb`などのコンポーネントの名前。正規表現`^[a-z\d](?:[a-z\d]|-(?=[a-z\d])){0,38}$`に一致する文字列を使用することを推奨します。
- `<version>`: 公開するコンポーネントのバージョン。バージョン番号は[セマンティックバージョニング](https://semver.org/)の要件に従う必要があります。
- `<tarball>`: `.tar.gz`パッケージのローカルディレクトリ。このパッケージには依存関係やコンポーネントの実行可能ファイルを配置する必要があります。TiUPはこのパッケージをミラーにアップロードします。
- `<entry>`: `<tarball>`内のコンポーネントの実行可能ファイルの場所。

## Options

### -k、--key

- コンポーネント所有者の秘密鍵を指定します。クライアントは秘密鍵を使用して`{component}.json`ファイルに署名します。
- データ型：`STRING`
- デフォルト：「${TIUP_HOME}/keys/private.json」

### --arch

- `<tarball>`内のバイナリファイルが実行できるプラットフォームを指定します。単一の`<tarball>`パッケージでは、以下のオプションからプラットフォームを選択できます：

    - `amd64`：AMD64マシンでファイルを実行します。
    - `arm64`：ARM64マシンでファイルを実行します。
    - `any`：スクリプトなどのファイルが、AMD64およびARM64マシンの両方で実行されます。

- データ型：`STRING`
- デフォルト：「${GOARCH}」

> **注意:**
>
> `--arch`が`any`に設定されている場合、`--os`も`any`に設定する必要があります。

### --os

- `<tarball>`内のバイナリファイルが実行できるオペレーティングシステムを指定します。単一の`<tarball>`パッケージでは、以下のオプションからオペレーティングシステムを選択できます：

    - `linux`：Linuxオペレーティングシステムでファイルを実行します。
    - `darwin`：Darwinオペレーティングシステムでファイルを実行します。
    - `any`：スクリプトなどのファイルが、LinuxおよびDarwinオペレーティングシステムの両方で実行されます。

- データ型：`STRING`
- デフォルト：「${GOOS}」

> **注意:**
>
> `--os`が`any`に設定されている場合、`--arch`も`any`に設定する必要があります。

### --desc

- コンポーネントの説明を指定します。
- データ型：`String`
- デフォルト：NULL

### --hide

- コンポーネントを非表示にするかどうかを指定します。非表示のコンポーネントの場合、`tiup list -all`の結果リストには表示されますが、`tiup list`の結果リストには表示されません。
- データ型：`STRING`
- デフォルト：NULL

### --standalone

- コンポーネントがスタンドアロンで実行できるかどうかを制御します。このオプションは現在、**利用できません**。
- データ型：`BOOLEAN`
- このオプションはデフォルトで無効になっており、デフォルト値は`false`です。このオプションを有効にするには、このオプションをコマンドに追加し、`true`の値を渡すか、任意の値を渡さないようにします。

## 出力

- コマンドが正常に実行された場合、出力はありません。
- コンポーネント所有者がターゲットのコンポーネントを変更する権限を持っていない場合：
    - ミラーがリモートミラーの場合、TiUPはエラー`Error: The server refused, make sure you have access to this component`を報告します。
    - ミラーがローカルミラーの場合、TiUPはエラー`Error: the signature is not correct`を報告します。

[<< 前のページに戻る - TiUPミラーコマンドリスト](/tiup/tiup-command-mirror.md#command-list)