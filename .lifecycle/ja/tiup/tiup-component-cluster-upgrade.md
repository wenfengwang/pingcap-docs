---
title: tiup クラスターのアップグレード
---

# tiup クラスターのアップグレード

`tiup cluster upgrade` コマンドは、指定されたクラスターを特定のバージョンにアップグレードするために使用されます。

## 構文

```shell
tiup cluster upgrade <cluster-name> <version> [flags]
```

- `<cluster-name>`: 操作するクラスターの名前。クラスター名を忘れた場合は、[cluster list](/tiup/tiup-component-cluster-list.md) コマンドで確認できます。
- `<version>`: アップグレードするターゲットのバージョン。たとえば `v7.4.0` のようなものです。現在、現在のクラスターよりも高いバージョンにアップグレードすることが許可されており、つまりダウングレードは許可されていません。また、ナイトリーバージョンにアップグレードすることはできません。

## オプション

### --force

- クラスターをアップグレードするためには、クラスターが現在起動していることを確認する必要があります。場合によっては、クラスターが起動していないときにアップグレードしたい場合があります。このときは `--force` を使用して、アップグレード中のエラーを無視し、バイナリファイルを強制的に置き換え、クラスタを起動します。
- データ型: `BOOLEAN`
- デフォルト: false

> **注意:**
>
> サービスを提供しているクラスターをアップグレードを強制的に行うと、サービスが利用できなくなることがあります。起動していないクラスターは、成功したアップグレード後に自動的に起動します。

### --transfer-timeout

- PD や TiKV をアップグレードする場合、アップグレードされるノードのリーダーはまず他のノードに移行されます。移行プロセスには時間がかかる場合があり、`-transfer-timeout` オプションで最大の待機時間（秒単位）を設定できます。タイムアウト後、待機がスキップされ、サービスが直接アップグレードされます。
- データ型: `uint`
- デフォルト: 600

> **注意:**
>
> 待機がスキップされ、サービスが直接アップグレードされた場合、サービスのパフォーマンスが不安定になる可能性があります。

### --ignore-config-check

- バイナリが更新された後、TiDB、TiKV、PD コンポーネントの構成チェックがユーザーの構成に基づいて生成された構成ファイル(`<config-file>`)を使用して `<binary> --config-check <config-file>` を実行します。このチェックをスキップするには `--ignore-config-check` オプションを使用できます。
- データ型: `BOOLEAN`
- デフォルト: false

### --offline

- 現在のクラスターが実行されていないことを宣言します。このオプションが指定されている場合、TiUP はサービスのリーダーを他のノードに追い出したり、サービスを再起動したりせずに、クラスターのコンポーネントのバイナリファイルのみを置き換えます。
- データ型: `BOOLEAN`
- このオプションはデフォルトで無効になっており、`false` の値が設定されています。このオプションを有効にするには、コマンドにこのオプションを追加し、`true` の値を渡すか、任意の値を渡さないでください。

### -h, --help

- ヘルプ情報を表示します。
- データ型: `BOOLEAN`
- デフォルト: false

## 出力

アップグレードの進捗状況のログ。

[<< 前のページに戻る - TiUP クラスターコマンドリスト](/tiup/tiup-component-cluster.md#command-list)