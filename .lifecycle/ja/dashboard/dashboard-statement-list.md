---
title: TiDB ダッシュボードの SQL ステートメントページ
summary: TiDB クラスター内のすべての SQL ステートメントの実行ステータスを表示します。
aliases: ['/docs/dev/dashboard/dashboard-statement-list/']
---

# TiDB ダッシュボードの SQL ステートメントページ

SQL ステートメントページでは、クラスター内のすべての SQL ステートメントの実行ステータスが表示されます。このページは、合計または単一の実行時間が長い SQL ステートメントを分析するためによく使用されます。

このページでは、クエリパラメータが不一致でも、一貫した構造の SQL クエリは同じ SQL ステートメントとして分類されます。たとえば、`SELECT * FROM employee WHERE id IN (1, 2, 3)` と `select * from EMPLOYEE where ID in (4, 5)` は同じ `select * from employee where id in (...)` SQL ステートメントとして分類されます。

## ページへのアクセス

以下の方法のいずれかを使用して SQL ステートメントサマリーページにアクセスできます:

* TiDB ダッシュボードにログインした後、左側のナビゲーションメニューで **SQL ステートメント** をクリックします。

* ブラウザで <http://127.0.0.1:2379/dashboard/#/statement> を訪問します。`127.0.0.1:2379` を実際の PD インスタンスのアドレスとポートに置き換えてください。

SQL ステートメントサマリーページに表示されるすべてのデータは、TiDB ステートメントサマリーテーブルから取得されます。テーブルの詳細については、[TiDB ステートメントサマリーテーブル](/statement-summary-tables.md) を参照してください。

> **注意:**
>
> SQL ステートメントサマリーページの **平均遅延** 列では、青いバーが平均実行時間を示します。SQL ステートメントの場合、青いバーに黄色の線があると、黄色の線の左側と右側がそれぞれ最小実行時間と最大実行時間を表します。

### フィルタの変更

SQL ステートメントサマリーページのトップには、表示される SQL 実行の時間範囲を変更することができます。また、実行された SQL ステートメントのデータベースによるリストをフィルタリングしたり、SQL の種類でフィルタリングすることもできます。以下の画像は、直近のデータ収集サイクル（デフォルトでは直近30分）でのすべての SQL 実行を示しています。

![フィルタの変更](/media/dashboard/dashboard-statement-filter-options.png)

### 追加の列の表示

ページで **列** をクリックすると、さらに多くの列を表示できます。列名の右側の**(i)** アイコンにマウスを移動すると、この列の説明が表示されます:

![列の選択](/media/dashboard/dashboard-statement-columns-selector.png)

### 列でソート

デフォルトでは、リストは **合計遅延** で高い順に並べられています。他の列の見出しをクリックして、ソートの基準を変更したり、ソートの順序を切り替えることができます:

![リストのソートの変更](/media/dashboard/dashboard-statement-change-order.png)

### 設定の変更

リストページで、右上の **設定** ボタンをクリックして、SQL ステートメント機能の設定を変更できます:

![設定エントリー](/media/dashboard/dashboard-statement-setting-entry.png)

**設定** ボタンをクリックした後、次の設定ダイアログボックスが表示されます:

![設定](/media/dashboard/dashboard-statement-settings.png)

設定ページでは、SQL ステートメント機能を無効または有効にできます。SQL ステートメント機能が有効になっている場合、次の設定を変更できます:

- 収集間隔: 各 SQL ステートメント解析の期間の長さで、デフォルトでは30分です。SQL ステートメント機能は、時間内に実行されたすべての SQL ステートメントを集計して数えます。期間が長すぎると、集計の粒度が荒くなり、問題の特定が困難になります。期間が短すぎると、集計の粒度が細かくなり、問題の特定が容易になりますが、同じデータ保持期間内でより多くのレコードとメモリ使用量が発生します。そのため、実際の状況に合わせてこの値を調整し、問題の特定時には適切にこの値を下げる必要があります。
- データ保持期間: サマリー情報の保持期間で、デフォルトでは1日です。この期間より長く保持されたデータはシステムテーブルから削除されます。

詳細については [ステートメントサマリーテーブルの設定](/statement-summary-tables.md#parameter-configuration) を参照してください。

> **注意:**
>
> + ステートメントシステムテーブルはメモリにのみ保存されるため、SQL ステートメント機能を無効にした後、システムテーブル内のデータが消去されます。
>
> + `収集間隔` と `保持期間` の値はメモリ使用量に影響を与えるため、実際の状況に合わせてこれらの値を調整することをお勧めします。`保持期間` の値はあまり大きく設定しないように注意してください。

### その他

[`tidb_stmt_summary_max_stmt_count`](/system-variables.md#tidb_stmt_summary_max_stmt_count-new-in-v40) は、ステートメントサマリーテーブルに保存できる SQL ステートメント数を制限します。制限を超えると、TiDB は最近使用されていない SQL ステートメントを削除します。削除された SQL ステートメントは `DIGEST` を `NULL` に設定した行として表されます。TiDB ダッシュボードの SQL ステートメントページで、これらの行の情報は `その他` として表示されます。

![その他](/media/dashboard/dashboard-statement-other-row.png)

## 次の手順

SQL ステートメントの実行詳細を表示する方法の詳細については、[TiDB ダッシュボードのステートメント実行詳細](/dashboard/dashboard-statement-details.md) を参照してください。